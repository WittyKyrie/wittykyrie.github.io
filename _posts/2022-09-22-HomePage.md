---
title: 什么是“Interfaces”以及如何使用
author: wittykyrie
date: 2022-09-22 09:00:00 +0800
categories: [Unity, Interfaces]
tags: [Interfaces]
render_with_liquid: false
---

这篇博客你将学习到以下的内容
1. 什么是Interfaces
2. 如何创建一个Interfaces
3. 在Unity当中应该如何使用Interfaces

## 什么是Interface

Unity的接口我们可以近似的理解为一个函数列表。
当类实现接口的时候，这个类必须公开的包含这些函数，使用与接口中编写的相同的方法名称，相同的参数以及相同的返回类型。
接口作为一种约束，让使用它的脚本必须执行在接口内所定义的规则，因此对于一些脚本而言，继承了接口的类可以被近似的看成同一类型的类，即使他们本质上并不同。
举个例子，在我们上面提到的RPG游戏的例子，玩家可以对怪物发动攻击，对建筑发动攻击，对敌人发动攻击，我们希望当玩家攻击的时候，被攻击的物体可以依次实现GetHurt()方法，而不必考虑被攻击物体到底是怪物建筑和敌人中的哪一个。因此我们这里将建筑，怪物，敌人统一视作“可以被人物攻击到”的物体。
即使建筑，怪物，敌人收到伤害的方式可能不太一样，但是我们任然可以调用一样的函数来进行执行。


## 如何在Unity中创建Interface

在Unity当中创建Interface和在Unity当中创建Scripts有着一样的步骤。

一般对于Interface的命名开头我们通常以一个大写的I来开头，用interface来表示这个文件是一个接口。

```c#
public interface ICanHit
{

}
```

然后我们会在这个接口中声明我们需要使用的方法和变量。在我们这篇文章讲的例子当中，我们希望它拥有GetHurt()的方法，但是你在编写函数方法的时候不需要将函数的权限设置为public，也不用包含函数的主体。就像下面的代码所显示的。
```c#
public interface ICanHit
{
    void GetHurt();
}
```
对于那些我们希望被视作为“可以被人物攻击到”的物体。我们将他们用语法来实现我们刚刚创建好的接口。
```c#
public class Enemy : MonoBehaviour, ICanHit
{
    public void GetHurt(){
        //Enemy受到了伤害
    }
}
```
他必须要像我们在接口中定义的函数那样，具有一样的名字，一样的返回类型，以及可以公开进行访问。但是函数的实现部分是Enemy所独有的，你可以在其中添加动画，血量减少的enmey独有的逻辑。建筑类和怪物类也使用相同的方法来进行继承。
所以在Unity当中我们希望当玩家攻击的时候可以通过接口来进行判断物体是否可以被伤害，我们可以使用TryGetComponent来进行实现。
```c#
public void PlayerAttack(GameObject object)
{
    if(object.TryGetComponent(out ICanHit canHit)){
        object.GetHurt();
    }
}
```

 ## 什么时候该使用Interfaceas